import{r as C,R as b,S as P,j as e,q as O,a as T,f as $}from"./app-bV1oKjKy.js";import{E as R,r as q}from"./index-6KH3gXbP.js";import{y as A,P as F}from"./PortalLayout-u-5QNYDI.js";import{u as D}from"./useErrorToast-B9XNEQ0p.js";import{x as E}from"./useData-Bpd0XriX.js";import{S as w}from"./sweetalert2.esm.all-89IKscqO.js";import{M as g}from"./Modal-Cs-ZlOYu.js";import{F as a}from"./Form-CnKhehiI.js";import{R as _}from"./Row-B4t5VXUr.js";import{C as p}from"./Col-CcX1xzGs.js";import{P as j,B as y}from"./warning-DViRBwvh.js";import{B as I}from"./ButtonGroup-eq7KuXkt.js";import{C as L}from"./Card-ClEnLKUp.js";import{T as U}from"./Table-M2KRe3ue.js";import{c as z,T as W}from"./trash-2-qSFVX8EB.js";import"./CloseButton-BYbBlkTD.js";import"./ElementChildren-C0T05OxF.js";var H=["color","size","title","className"];function G(){return G=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var t in o)({}).hasOwnProperty.call(o,t)&&(r[t]=o[t])}return r},G.apply(null,arguments)}function K(r,s){if(r==null)return{};var o,t,c=V(r,s);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(r);for(t=0;t<m.length;t++)o=m[t],s.includes(o)||{}.propertyIsEnumerable.call(r,o)&&(c[o]=r[o])}return c}function V(r,s){if(r==null)return{};var o={};for(var t in r)if({}.hasOwnProperty.call(r,t)){if(s.includes(t))continue;o[t]=r[t]}return o}var M=C.forwardRef(function(r,s){var o=r.color,t=o===void 0?"currentColor":o,c=r.size,m=c===void 0?"1em":c,i=r.title,d=i===void 0?null:i,h=r.className,f=h===void 0?"":h,N=K(r,H);return b.createElement("svg",G({ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:m,height:m,fill:t,className:["bi","bi-info-circle",f].filter(Boolean).join(" ")},N),d?b.createElement("title",null,d):null,b.createElement("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),b.createElement("path",{d:"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"}))});M.propTypes={color:j.string,size:j.oneOfType([j.string,j.number]),title:j.string,className:j.string};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],k=z("arrow-up-down",Y);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Q=z("hash",J);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Z=z("pencil",X),S=()=>{const r=Date.now().toString(36),s=Math.random().toString(36).slice(2,6);return`GSCALE-${r}-${s}`.toUpperCase()},B=(r,s=null)=>({grading_system_id:r,name:(s==null?void 0:s.name)??"",code:(s==null?void 0:s.code)??S(),min_score:(s==null?void 0:s.min_score)??"",max_score:(s==null?void 0:s.max_score)??"",grade_point:(s==null?void 0:s.grade_point)??"",remark:(s==null?void 0:s.remark)??"",display_order:(s==null?void 0:s.display_order)??0});function ee({show:r,onHide:s,gradingSystem:o,gradeScale:t=null}){const c=!!t,{showErrorToast:m}=D(),{data:i,setData:d,processing:h,reset:f}=P(B(o.id));C.useEffect(()=>{r&&d(B(o.id,c?t:null))},[r,t,o.id,c,d]);const N=async l=>{l.preventDefault();const u=c?"Update":"Create";try{if(!(await w.fire({title:`${u} Scale`,text:`Confirm to ${u.toLowerCase()} this grade scale.`,icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)return;w.fire({title:"Please wait...",text:`${u} in progress`,icon:"info",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>w.showLoading()});const n=c?route("admin.grade-scale.update",t.id):route("admin.grade-scale.store"),x=c?await E.put(n,i):await E.post(n,i);x.data.success&&(A.success(x.data.message||"Saved successfully"),f(),s())}catch(v){m(v)}finally{w.close()}};return e.jsx(g,{show:r,onHide:s,size:"lg",centered:!0,children:e.jsxs(a,{onSubmit:N,children:[e.jsx(g.Header,{closeButton:!0,children:e.jsx(g.Title,{children:c?"Edit Grade Scale":"Create Grade Scale"})}),e.jsxs(g.Body,{children:[e.jsxs(_,{className:"mb-3",children:[e.jsx(p,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Name"}),e.jsx(a.Control,{value:i.name,onChange:l=>d("name",l.target.value),required:!0})]})}),e.jsx(p,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Code"}),e.jsx(a.Control,{value:i.code,readOnly:!0,className:"bg-light"})]})})]}),e.jsxs(_,{className:"mb-3",children:[e.jsx(p,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Min Score"}),e.jsx(a.Control,{type:"number",step:"0.01",value:i.min_score,onChange:l=>d("min_score",l.target.value),required:!0})]})}),e.jsx(p,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Max Score"}),e.jsx(a.Control,{type:"number",step:"0.01",value:i.max_score,onChange:l=>d("max_score",l.target.value),required:!0})]})})]}),e.jsxs(_,{className:"mb-3",children:[e.jsx(p,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Grade Point"}),e.jsx(a.Control,{type:"number",step:"0.01",value:i.grade_point,onChange:l=>d("grade_point",l.target.value)})]})}),e.jsx(p,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Remark"}),e.jsx(a.Control,{value:i.remark,onChange:l=>d("remark",l.target.value)})]})})]}),e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Display Order"}),e.jsx(a.Control,{type:"number",value:i.display_order,onChange:l=>d("display_order",l.target.value)})]})]}),e.jsxs(g.Footer,{children:[e.jsx(y,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsx(y,{variant:"primary",type:"submit",disabled:h,children:h?"Saving...":c?"Update":"Create"})]})]})})}function fe({gradingSystem:r}){var v;const{auth:s}=O().props,[o,t]=C.useState(!1),[c,m]=C.useState(null),[i,d]=C.useState({key:"display_order",direction:"asc"}),h=(n=null)=>{m(n),t(!0)},f=()=>{m(null),t(!1),$.reload()},N=[...r.grade_scales||[]].sort((n,x)=>n[i.key]<x[i.key]?i.direction==="asc"?-1:1:n[i.key]>x[i.key]?i.direction==="asc"?1:-1:0),l=n=>{let x="asc";i.key===n&&i.direction==="asc"&&(x="desc"),d({key:n,direction:x})},u=n=>i.key!==n?e.jsx(k,{size:14}):i.direction==="asc"?e.jsx(k,{size:14,className:"text-primary"}):e.jsx(k,{size:14,className:"text-primary",style:{transform:"rotate(180deg)"}});return e.jsxs(F,{user:s.user,children:[e.jsx(T,{title:`Grading System - ${r.name}`}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:r.name}),e.jsxs(I,{className:"gap-2",children:[e.jsxs(y,{variant:"outline-primary",size:"sm",as:"a",href:route("admin.grading-system.index"),children:[e.jsx(R,{className:"me-2"}),"Back to List"]}),e.jsxs(y,{variant:"outline-primary",size:"sm",onClick:()=>h(),children:[e.jsx(q,{size:16,className:"me-1"})," Add Grade Scale"]})]})]}),e.jsx("hr",{className:"dashed-hr"}),e.jsx(_,{children:e.jsx(p,{children:e.jsx(L,{className:"shadow-sm",children:e.jsx(L.Body,{children:((v=r.grade_scales)==null?void 0:v.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs(U,{hover:!0,className:"border m-0",children:[e.jsx("thead",{className:"bg-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"5%",cursor:"pointer"},onClick:()=>l("name"),className:"py-3",children:e.jsxs("div",{className:"d-flex align-items-center",children:["Name"," ",u("name")]})}),e.jsx("th",{style:{width:"10%",cursor:"pointer"},onClick:()=>l("code"),className:"py-3",children:e.jsxs("div",{className:"d-flex align-items-center",children:["Code"," ",u("code")]})}),e.jsx("th",{style:{width:"15%",cursor:"pointer"},onClick:()=>l("min_score"),className:"py-3",children:e.jsxs("div",{className:"d-flex align-items-center",children:["Range"," ",u("min_score")]})}),e.jsx("th",{style:{width:"10%",cursor:"pointer"},onClick:()=>l("grade_point"),className:"py-3",children:e.jsxs("div",{className:"d-flex align-items-center",children:["Point"," ",u("grade_point")]})}),e.jsx("th",{style:{width:"20%"},className:"py-3",children:"Remark"}),e.jsx("th",{style:{width:"10%",cursor:"pointer"},onClick:()=>l("display_order"),className:"py-3",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(Q,{size:14,className:"me-1"})," ","Order"," ",u("display_order")]})}),e.jsx("th",{style:{width:"15%"},className:"text-end py-3",children:"Actions"})]})}),e.jsx("tbody",{children:N.map(n=>e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle",children:e.jsx("div",{className:"fw-semibold",children:n.name})}),e.jsx("td",{className:"align-middle",children:e.jsx("code",{children:n.code})}),e.jsx("td",{className:"align-middle",children:e.jsxs("span",{className:"badge bg-light text-dark",children:[n.min_score," -"," ",n.max_score]})}),e.jsx("td",{className:"align-middle",children:n.grade_point??e.jsx("span",{className:"text-muted",children:"-"})}),e.jsx("td",{className:"align-middle",children:n.remark||e.jsx("span",{className:"text-muted",children:"No remark"})}),e.jsx("td",{className:"align-middle",children:n.display_order}),e.jsxs("td",{className:"text-end align-middle",children:[e.jsx(y,{variant:"outline-primary",size:"sm",className:"me-2 d-inline-flex align-items-center",onClick:()=>h(n),children:e.jsx(Z,{size:14})}),e.jsx(y,{variant:"outline-danger",size:"sm",className:"d-inline-flex align-items-center",children:e.jsx(W,{size:14})})]})]},n.id))})]})}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx(M,{size:48,className:"text-muted mb-3"}),e.jsx("h5",{className:"text-muted",children:"No grade scales defined yet"}),e.jsx("p",{className:"text-muted mb-4",children:"Get started by adding your first grade scale"})]})})})})}),e.jsx(ee,{show:o,onHide:f,gradingSystem:r,gradeScale:c})]})}export{fe as default};
