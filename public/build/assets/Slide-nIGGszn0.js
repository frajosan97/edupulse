import{r as l,j as e,q as je,a as ge}from"./app-CiDaUcey.js";import{H as ve,I as Y,J as we,K as ye,L as be,M as ne,N as re,O as Ne,P as J,e as _e,Q as Ce}from"./index-NpM1gPvR.js";import{y as D,P as Se}from"./PortalLayout-CxqdbcvG.js";import{S as P}from"./sweetalert2.esm.all-89IKscqO.js";import{k as ke,l as Te,n as Q,o as Ee,p as X,q as Re,r as Oe,s as Fe,t as Z,v as De,w as Me,x as U,G as Be}from"./useData-CInDpAgI.js";import{u as Le}from"./useErrorToast-CTAe8NjK.js";import{u as $e,M as E}from"./Modal-CviNt8xm.js";import{F as h}from"./Form-DY59OgGH.js";import{R as H}from"./Row-DoEZsrd7.js";import{C as R}from"./Col-H7LL1jeG.js";import{I as Ie}from"./Image-BQGTw1Pt.js";import{u as B,c as A,h as le,P as Pe,B as M}from"./warning-CDyBO85i.js";import{B as G}from"./Badge-B8SxXTMH.js";import{C as O}from"./Card-O6qekqvm.js";import{f as Ue,k as Ae,o as Ge,l as He,R as ze,j as oe,a as Ve,F as ee,v as q,g as qe,w as Ke}from"./CloseButton-uf0rwOsm.js";import{B as We}from"./ButtonGroup-Bf8VZ0Fe.js";import{T as Ye}from"./Table-CC8sxR3u.js";import"./ElementChildren-Ykn35dyp.js";function Je(){const s=l.useRef(!0),a=l.useRef(()=>s.current);return l.useEffect(()=>(s.current=!0,()=>{s.current=!1}),[]),a.current}const K=2**31-1;function ie(s,a,t){const n=t-Date.now();s.current=n<=K?setTimeout(a,n):setTimeout(()=>ie(s,a,t),K)}function Qe(){const s=Je(),a=l.useRef();return $e(()=>clearTimeout(a.current)),l.useMemo(()=>{const t=()=>clearTimeout(a.current);function n(r,i=0){s()&&(t(),i<=K?a.current=setTimeout(r,i):ie(a,r,Date.now()+i))}return{set:n,clear:t,handleRef:a}},[])}const Xe=()=>{};function Ze(s,a,{disabled:t,clickTrigger:n}={}){const r=a||Xe;ke(s,r,{disabled:t,clickTrigger:n});const i=Ue(f=>{Ae(f)&&r(f)});l.useEffect(()=>{if(t||s==null)return;const f=Ge(Te(s));let j=(f.defaultView||window).event;const p=He(f,"keyup",d=>{if(d===j){j=void 0;return}i(d)});return()=>{p()}},[s,t,i])}const ce=l.forwardRef((s,a)=>{const{flip:t,offset:n,placement:r,containerPadding:i,popperConfig:f={},transition:j,runTransition:p}=s,[d,S]=Q(),[g,C]=Q(),b=Ee(S,a),x=X(s.container),_=X(s.target),[c,v]=l.useState(!s.show),u=Re(_,d,Oe({placement:r,enableEvents:!!s.show,containerPadding:i||5,flip:t,offset:n,arrowElement:g,popperConfig:f}));s.show&&c&&v(!1);const o=(...z)=>{v(!0),s.onExited&&s.onExited(...z)},m=s.show||!c;if(Ze(d,s.onHide,{disabled:!s.rootClose||s.rootCloseDisabled,clickTrigger:s.rootCloseEvent}),!m)return null;const{onExit:N,onExiting:y,onEnter:w,onEntering:k,onEntered:L}=s;let I=s.children(Object.assign({},u.attributes.popper,{style:u.styles.popper,ref:b}),{popper:u,placement:r,show:!!s.show,arrowProps:Object.assign({},u.attributes.arrow,{style:u.styles.arrow,ref:C})});return I=Fe(j,p,{in:!!s.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:I,onExit:N,onExiting:y,onExited:o,onEnter:w,onEntering:k,onEntered:L}),x?ze.createPortal(I,x):null});ce.displayName="Overlay";const de=l.forwardRef(({className:s,bsPrefix:a,as:t="div",...n},r)=>(a=B(a,"popover-header"),e.jsx(t,{ref:r,className:A(s,a),...n})));de.displayName="PopoverHeader";const W=l.forwardRef(({className:s,bsPrefix:a,as:t="div",...n},r)=>(a=B(a,"popover-body"),e.jsx(t,{ref:r,className:A(s,a),...n})));W.displayName="PopoverBody";function ue(s,a){let t=s;return s==="left"?t=a?"end":"start":s==="right"&&(t=a?"start":"end"),t}function me(s="absolute"){return{position:s,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const et=l.forwardRef(({bsPrefix:s,placement:a="right",className:t,style:n,children:r,body:i,arrowProps:f,hasDoneInitialMeasure:j,popper:p,show:d,...S},g)=>{const C=B(s,"popover"),b=le(),[x]=(a==null?void 0:a.split("-"))||[],_=ue(x,b);let c=n;return d&&!j&&(c={...n,...me(p==null?void 0:p.strategy)}),e.jsxs("div",{ref:g,role:"tooltip",style:c,"x-placement":x,className:A(t,C,x&&`bs-popover-${_}`),...S,children:[e.jsx("div",{className:"popover-arrow",...f}),i?e.jsx(W,{children:r}):r]})}),tt=Object.assign(et,{Header:de,Body:W,POPPER_OFFSET:[0,8]}),fe=l.forwardRef(({bsPrefix:s,placement:a="right",className:t,style:n,children:r,arrowProps:i,hasDoneInitialMeasure:f,popper:j,show:p,...d},S)=>{s=B(s,"tooltip");const g=le(),[C]=(a==null?void 0:a.split("-"))||[],b=ue(C,g);let x=n;return p&&!f&&(x={...n,...me(j==null?void 0:j.strategy)}),e.jsxs("div",{ref:S,style:x,role:"tooltip","x-placement":C,className:A(t,s,`bs-tooltip-${b}`),...d,children:[e.jsx("div",{className:"tooltip-arrow",...i}),e.jsx("div",{className:`${s}-inner`,children:r})]})});fe.displayName="Tooltip";const he=Object.assign(fe,{TOOLTIP_OFFSET:[0,6]});function st(s){const a=l.useRef(null),t=B(void 0,"popover"),n=B(void 0,"tooltip"),r=l.useMemo(()=>({name:"offset",options:{offset:()=>{if(s)return s;if(a.current){if(Z(a.current,t))return tt.POPPER_OFFSET;if(Z(a.current,n))return he.TOOLTIP_OFFSET}return[0,0]}}}),[s,t,n]);return[a,[r]]}function at(s,a){const{ref:t}=s,{ref:n}=a;s.ref=t.__wrapped||(t.__wrapped=r=>t(q(r))),a.ref=n.__wrapped||(n.__wrapped=r=>n(q(r)))}const xe=l.forwardRef(({children:s,transition:a=ee,popperConfig:t={},rootClose:n=!1,placement:r="top",show:i=!1,...f},j)=>{const p=l.useRef({}),[d,S]=l.useState(null),[g,C]=st(f.offset),b=oe(j,g),x=a===!0?ee:a||void 0,_=Ve(c=>{S(c),t==null||t.onFirstUpdate==null||t.onFirstUpdate(c)});return De(()=>{d&&f.target&&(p.current.scheduleUpdate==null||p.current.scheduleUpdate())},[d,f.target]),l.useEffect(()=>{i||S(null)},[i]),e.jsx(ce,{...f,ref:b,popperConfig:{...t,modifiers:C.concat(t.modifiers||[]),onFirstUpdate:_},transition:x,rootClose:n,placement:r,show:i,children:(c,{arrowProps:v,popper:u,show:o})=>{var m;at(c,v);const N=u==null?void 0:u.placement,y=Object.assign(p.current,{state:u==null?void 0:u.state,scheduleUpdate:u==null?void 0:u.update,placement:N,outOfBoundaries:(u==null||(m=u.state)==null||(m=m.modifiersData.hide)==null?void 0:m.isReferenceHidden)||!1,strategy:t.strategy}),w=!!d;return typeof s=="function"?s({...c,placement:N,show:o,...!a&&o&&{className:"show"},popper:y,arrowProps:v,hasDoneInitialMeasure:w}):l.cloneElement(s,{...c,placement:N,arrowProps:v,popper:y,hasDoneInitialMeasure:w,className:A(s.props.className,!a&&o&&"show"),style:{...s.props.style,...c.style}})}})});xe.displayName="Overlay";function nt(s){return s&&typeof s=="object"?s:{show:s,hide:s}}function te(s,a,t){const[n]=a,r=n.currentTarget,i=n.relatedTarget||n.nativeEvent[t];(!i||i!==r)&&!Me(r,i)&&s(...a)}Pe.oneOf(["click","hover","focus"]);const rt=({trigger:s=["hover","focus"],overlay:a,children:t,popperConfig:n={},show:r,defaultShow:i=!1,onToggle:f,delay:j,placement:p,flip:d=p&&p.indexOf("auto")!==-1,...S})=>{const g=l.useRef(null),C=oe(g,qe(t)),b=Qe(),x=l.useRef(""),[_,c]=Ke(r,i,f),v=nt(j),{onFocus:u,onBlur:o,onClick:m}=typeof t!="function"?l.Children.only(t).props:{},N=T=>{C(q(T))},y=l.useCallback(()=>{if(b.clear(),x.current="show",!v.show){c(!0);return}b.set(()=>{x.current==="show"&&c(!0)},v.show)},[v.show,c,b]),w=l.useCallback(()=>{if(b.clear(),x.current="hide",!v.hide){c(!1);return}b.set(()=>{x.current==="hide"&&c(!1)},v.hide)},[v.hide,c,b]),k=l.useCallback((...T)=>{y(),u==null||u(...T)},[y,u]),L=l.useCallback((...T)=>{w(),o==null||o(...T)},[w,o]),I=l.useCallback((...T)=>{c(!_),m==null||m(...T)},[m,c,_]),z=l.useCallback((...T)=>{te(y,T,"fromElement")},[y]),pe=l.useCallback((...T)=>{te(w,T,"toElement")},[w]),V=s==null?[]:[].concat(s),F={ref:N};return V.indexOf("click")!==-1&&(F.onClick=I),V.indexOf("focus")!==-1&&(F.onFocus=k,F.onBlur=L),V.indexOf("hover")!==-1&&(F.onMouseOver=z,F.onMouseOut=pe),e.jsxs(e.Fragment,{children:[typeof t=="function"?t(F):l.cloneElement(t,F),e.jsx(xe,{...S,show:_,onHide:w,flip:d,placement:p,popperConfig:n,target:g.current,children:a})]})},se={title:"",description:"",image:null,link_url:"",link_text:"",display_order:"",is_active:!0,start_date:"",end_date:""};function lt({show:s,onHide:a,slide:t=null}){const n=!!t,[r,i]=l.useState(se),[f,j]=l.useState(null),[p,d]=l.useState({}),{showErrorToast:S}=Le();l.useEffect(()=>{s&&(n?(i({title:t.title??"",description:t.description??"",image:null,link_url:t.link_url??"",link_text:t.link_text??"",display_order:t.display_order??"",is_active:t.is_active!==void 0?t.is_active:!0,start_date:t.start_date?t.start_date.split("T")[0]:"",end_date:t.end_date?t.end_date.split("T")[0]:""}),j(t.image_url??null)):(i(se),j(null)),d({}))},[s,t,n]);const g=b=>{const{name:x,value:_,type:c,checked:v,files:u}=b.target;if(c==="file"){const o=u[0]||null;if(i(m=>({...m,image:o})),o){const m=new FileReader;m.onload=()=>j(m.result),m.readAsDataURL(o)}else j(null)}else i(o=>({...o,[x]:c==="checkbox"?v:_}));p[x]&&d(o=>({...o,[x]:null}))},C=async b=>{var c;if(b.preventDefault(),!n&&!r.image){D.error("Please select a slide image");return}const x=n?"Update":"Create",_=new FormData;Object.entries(r).forEach(([v,u])=>{u!==null&&u!==""&&_.append(v,u)});try{if(!(await P.fire({title:`${x} Slide`,text:`Confirm to ${x.toLowerCase()} this slide.`,icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)return;P.fire({title:"Please wait...",text:`${x} in progress`,icon:"info",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>P.showLoading()});const u=n?route("admin.school-slide.update",t.id):route("admin.school-slide.store"),o=n?await U.post(u,_,{headers:{"Content-Type":"multipart/form-data"}}):await U.post(u,_,{headers:{"Content-Type":"multipart/form-data"}});(c=o.data)!=null&&c.success&&(D.success(o.data.message),a())}catch(v){S(v)}finally{P.close()}};return e.jsx(E,{show:s,onHide:a,size:"lg",centered:!0,children:e.jsxs(h,{onSubmit:C,children:[e.jsx(E.Header,{closeButton:!0,children:e.jsx(E.Title,{children:n?"Edit Slide":"Create Slide"})}),e.jsxs(E.Body,{children:[e.jsxs(H,{children:[e.jsx(R,{md:6,children:e.jsxs(h.Group,{className:"mb-3",children:[e.jsxs(h.Label,{children:["Slide Image ",!n&&"*"]}),e.jsxs("div",{className:"border rounded p-3 text-center",children:[f?e.jsx(Ie,{src:f,fluid:!0,className:"rounded mb-2",style:{maxHeight:180}}):e.jsx("div",{className:"py-4 text-muted",children:"No image selected"}),e.jsx(h.Control,{type:"file",name:"image",accept:"image/*",onChange:g,isInvalid:!!p.image,required:!n}),e.jsx("small",{className:"text-muted d-block mt-2",children:"Max 5MB, JPG/PNG/WebP"})]})]})}),e.jsxs(R,{md:6,children:[e.jsxs(h.Group,{className:"mb-3",children:[e.jsx(h.Label,{children:"Title *"}),e.jsx(h.Control,{type:"text",name:"title",value:r.title,onChange:g,isInvalid:!!p.title,required:!0})]}),e.jsxs(h.Group,{className:"mb-3",children:[e.jsx(h.Label,{children:"Description"}),e.jsx(h.Control,{as:"textarea",rows:3,name:"description",value:r.description,onChange:g})]})]})]}),e.jsxs(H,{className:"mb-3",children:[e.jsx(R,{md:6,children:e.jsxs(h.Group,{children:[e.jsx(h.Label,{children:"Link URL"}),e.jsx(h.Control,{type:"url",name:"link_url",value:r.link_url,onChange:g})]})}),e.jsx(R,{md:6,children:e.jsxs(h.Group,{children:[e.jsx(h.Label,{children:"Link Text"}),e.jsx(h.Control,{type:"text",name:"link_text",value:r.link_text,onChange:g})]})})]}),e.jsxs(H,{className:"mb-3",children:[e.jsx(R,{md:4,children:e.jsxs(h.Group,{children:[e.jsx(h.Label,{children:"Display Order"}),e.jsx(h.Control,{type:"number",min:"0",name:"display_order",value:r.display_order,onChange:g})]})}),e.jsx(R,{md:4,children:e.jsxs(h.Group,{children:[e.jsx(h.Label,{children:"Start Date"}),e.jsx(h.Control,{type:"date",name:"start_date",value:r.start_date,onChange:g})]})}),e.jsx(R,{md:4,children:e.jsxs(h.Group,{children:[e.jsx(h.Label,{children:"End Date"}),e.jsx(h.Control,{type:"date",name:"end_date",value:r.end_date,onChange:g})]})})]}),e.jsxs(h.Group,{children:[e.jsx(h.Check,{type:"checkbox",name:"is_active",label:"Active",checked:r.is_active,onChange:g}),e.jsx("small",{className:"text-muted ms-2",children:"Inactive slides wonâ€™t show"})]})]}),e.jsxs(E.Footer,{children:[e.jsx(M,{variant:"secondary",onClick:a,children:"Cancel"}),e.jsx(M,{variant:"primary",type:"submit",children:n?"Update":"Create"})]})]})})}function ot(s){return Be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2zm0 16H5V7h14v12zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5zM12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4zm0 6.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(s)}const ae=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set",it={upcoming:{color:"warning",icon:e.jsx(J,{})},active:{color:"success",icon:e.jsx(ne,{})},expired:{color:"danger",icon:e.jsx(re,{})},neutral:{color:"secondary",icon:e.jsx(J,{})}};function ct({show:s,onHide:a,slide:t,onEdit:n}){const[r,i]=l.useState(!1),f=l.useMemo(()=>{if(!(t!=null&&t.start_date)||!(t!=null&&t.end_date))return"neutral";const d=new Date;return d<new Date(t.start_date)?"upcoming":d>new Date(t.end_date)?"expired":"active"},[t]);if(!t)return null;const{color:j,icon:p}=it[f];return e.jsxs(E,{show:s,onHide:a,size:"lg",centered:!0,backdrop:"static",children:[e.jsx(E.Header,{className:"border-0 pb-0 position-relative",children:e.jsxs(E.Title,{className:"w-100 d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"bg-primary bg-opacity-10 p-2 rounded-circle me-3",children:e.jsx(ot,{className:"text-primary fs-4"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 fw-bold",children:t.title}),e.jsx("small",{className:"text-muted",children:"Slide Preview"})]})]}),e.jsx(G,{bg:t.is_active?"success":"danger",className:"px-3 py-2",children:t.is_active?"Active":"Inactive"})]})}),e.jsxs(E.Body,{className:"pt-4",children:[e.jsxs(O,{className:"border-0 shadow-sm mb-4 overflow-hidden",children:[!r&&e.jsx("div",{className:"placeholder-glow",children:e.jsx("div",{className:"placeholder w-100",style:{height:280}})}),e.jsx("img",{src:`/storage/${t.image_path}`,alt:t.title,className:`w-100 ${r?"":"d-none"}`,style:{height:280,objectFit:"cover"},onLoad:()=>i(!0)}),e.jsxs(G,{bg:"dark",className:"position-absolute top-0 end-0 m-3",children:[e.jsx(ve,{className:"me-1"})," Image"]})]}),e.jsxs(H,{className:"g-4",children:[e.jsx(R,{lg:8,children:e.jsx(O,{className:"border-0 shadow-sm h-100",children:e.jsxs(O.Body,{children:[e.jsxs(O.Title,{className:"d-flex align-items-center",children:[e.jsx(Y,{className:"text-primary me-2"}),"Description",e.jsx(rt,{overlay:e.jsx(he,{children:"Slide content description"}),children:e.jsx("span",{className:"ms-2 text-muted",children:e.jsx(Y,{size:13})})})]}),e.jsx("p",{className:"lead",children:t.description||e.jsx("span",{className:"text-muted fst-italic",children:"No description provided"})}),t.link_url&&e.jsxs("div",{className:"p-3 bg-primary bg-opacity-5 rounded d-flex align-items-center",children:[e.jsx(we,{className:"text-primary me-3 fs-5"}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("small",{className:"text-muted d-block",children:"Slide Link"}),e.jsx("a",{href:t.link_url,target:"_blank",rel:"noreferrer",className:"fw-bold text-decoration-none",children:t.link_text||t.link_url})]}),e.jsx(M,{size:"sm",variant:"outline-primary",href:t.link_url,target:"_blank",children:e.jsx(ye,{})})]})]})})}),e.jsx(R,{lg:4,children:e.jsx(O,{className:"border-0 shadow-sm h-100",children:e.jsxs(O.Body,{children:[e.jsx("h6",{className:"text-uppercase text-muted mb-3",children:"Slide Info"}),e.jsxs("div",{className:"d-flex align-items-center mb-4",children:[e.jsx(be,{className:"text-primary me-3 fs-5"}),e.jsxs("div",{children:[e.jsx("small",{className:"text-muted",children:"Order"}),e.jsx("h4",{className:"fw-bold mb-0",children:t.display_order})]})]}),e.jsxs("div",{className:`p-3 rounded bg-${j}-subtle`,children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"Start"}),e.jsx("span",{children:ae(t.start_date)})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"End"}),e.jsx("span",{children:ae(t.end_date)})]}),e.jsxs(G,{bg:j,className:"w-100 mt-2",children:[p," ",f.toUpperCase()]})]}),e.jsxs("div",{className:"mt-3 d-flex justify-content-between align-items-center p-2 rounded bg-info bg-opacity-10",children:[e.jsxs("span",{children:[t.is_currently_active?e.jsx(ne,{className:"me-2 text-info"}):e.jsx(re,{className:"me-2 text-secondary"}),"Currently Active"]}),e.jsx(G,{bg:t.is_currently_active?"info":"secondary",children:t.is_currently_active?"Yes":"No"})]})]})})})]})]}),e.jsx(E.Footer,{className:"border-0",children:e.jsxs("div",{className:"d-flex justify-content-between w-100",children:[e.jsxs("small",{children:["Updated: ",new Date().toLocaleDateString()]}),e.jsxs(We,{className:"gap-2",children:[e.jsx(M,{variant:"outline-secondary",className:"rounded",onClick:a,children:"Close"}),e.jsxs(M,{variant:"primary",className:"rounded",onClick:()=>{n(t),a()},children:[e.jsx(Ne,{className:"me-2"})," Edit"]})]})]})})]})}function Tt(){const{auth:s}=je().props,[a,t]=l.useState(!1),[n,r]=l.useState(!1),[i,f]=l.useState(null),[j,p]=l.useState(null),[d,S]=l.useState(null);l.useEffect(()=>{const o=g();return S(o),()=>o==null?void 0:o.destroy()},[]);const g=()=>$("#slidesTable").DataTable({processing:!0,serverSide:!0,ajax:route("admin.school-slide.index"),columns:[{data:"image_preview",title:"Image",className:"text-center",orderable:!1},{data:"display_order",title:"Order",className:"text-center"},{data:"status",title:"Status",className:"text-center",orderable:!1},{data:"current_status",title:"Current",className:"text-center",orderable:!1},{data:"start_date",title:"Start Date",className:"text-center"},{data:"end_date",title:"End Date",className:"text-center"},{data:"action",title:"Actions",className:"text-center",orderable:!1}],order:[[3,"asc"]],responsive:!0});l.useEffect(()=>{if(!d)return;const o=w=>{const k=$(w.currentTarget).data("id");C(k,"view")},m=w=>{const k=$(w.currentTarget).data("id");C(k,"edit")},N=w=>{const k=$(w.currentTarget).data("id"),L=$(w.currentTarget).data("active")==="true";b(k,L)},y=w=>{const k=$(w.currentTarget).data("id");x(k)};return $(document).on("click",".btn-view",o),$(document).on("click",".btn-edit",m),$(document).on("click",".btn-toggle",N),$(document).on("click",".btn-delete",y),()=>{$(document).off("click",".btn-view",o),$(document).off("click",".btn-edit",m),$(document).off("click",".btn-toggle",N),$(document).off("click",".btn-delete",y)}},[d]);const C=async(o,m)=>{try{const y=(await U.get(route("admin.school-slide.show",o))).data;m==="view"?(p(y),r(!0)):m==="edit"&&(f(y),t(!0))}catch{D.error("Failed to fetch slide details")}},b=async(o,m)=>{var N,y;try{(await U.patch(route("admin.school-slide.toggle-status",o),{is_active:!m})).data.success&&(D.success(`Slide ${m?"deactivated":"activated"} successfully`),d.ajax.reload(null,!1))}catch(w){D.error(((y=(N=w.response)==null?void 0:N.data)==null?void 0:y.message)||"Failed to update status")}},x=async o=>{(await P.fire({title:"Are you sure?",text:"This slide will be permanently deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed&&_(o)},_=async o=>{var m,N;try{(await U.delete(route("admin.school-slide.destroy",o))).data.success&&(D.success("Slide deleted successfully"),d.ajax.reload(null,!1))}catch(y){D.error(((N=(m=y.response)==null?void 0:m.data)==null?void 0:N.message)||"Failed to delete slide")}},c=()=>{t(!1),f(null),d==null||d.ajax.reload()},v=()=>{r(!1),p(null)},u=o=>{f(o),t(!0)};return e.jsxs(Se,{user:s.user,children:[e.jsx(ge,{title:"Slides Management"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"h3 mb-0",children:"Slides Management"}),e.jsx("p",{className:"text-muted mb-0",children:"Manage homepage slides"})]}),e.jsxs(M,{variant:"primary",onClick:()=>t(!0),children:[e.jsx(_e,{className:"me-2"})," Add New Slide"]})]}),e.jsxs(O,{className:"border-0 shadow-sm",children:[e.jsx(O.Header,{className:"bg-white border-bottom",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0",children:"All Slides"}),e.jsxs("small",{className:"text-muted",children:["Drag ",e.jsx(Ce,{})," to reorder"]})]})}),e.jsx(O.Body,{children:e.jsx(Ye,{id:"slidesTable",className:"w-100",responsive:!0})})]}),e.jsx(lt,{show:a,onHide:c,slide:i}),e.jsx(ct,{show:n,onHide:v,slide:j,onEdit:u})]})}export{Tt as default};
