import{r as c,j as e,a as b,J as p}from"./app-bV1oKjKy.js";import{P as f}from"./PortalLayout-u-5QNYDI.js";import{f as u,a as i}from"./helpers-DALsaz0e.js";import{e as v}from"./index-CaxveVre.js";import{B as y}from"./ButtonGroup-eq7KuXkt.js";import{C as x}from"./Card-ClEnLKUp.js";import{T as g}from"./Tabs-BNirklZt.js";import{T as d}from"./Tab-DV6BPVb7.js";import{T as s}from"./Table-M2KRe3ue.js";import{B as m}from"./Badge-DAm-MJP0.js";import"./useData-Bpd0XriX.js";import"./warning-DViRBwvh.js";import"./CloseButton-BYbBlkTD.js";import"./ElementChildren-C0T05OxF.js";function h({school:t}){c.useEffect(()=>($("#invoices-table").DataTable({data:t==null?void 0:t.invoices,columns:[{title:"Invoice Number",data:"invoice_number",render:function(n,r,a){return`<strong>${n}</strong><br><small className="text-muted">${a.description}</small>`}},{title:"Amount",data:"total_amount",render:function(n){return u(n)}},{title:"Due Date",data:"due_date",render:function(n){return i(n,"DD/MM/YYYY")},className:"text-end"},{title:"Invoice Date",data:"created_at",render:function(n){return i(n,"DD/MM/YYYY")},className:"text-end"},{title:"Status",data:"status",render:function(n){return n==="paid"?'<span class="badge bg-success">Paid</span>':'<span class="badge bg-warning">Unpaid</span>'}},{title:"Actions",data:null,render:function(n,r,a){return`<a href="/tenant/invoices/${a.id}" class="btn btn-sm btn-primary">View</a>`},className:"text-end"}],responsive:!0,language:{emptyTable:"No invoices found"}}),$("#payments-table").DataTable({data:t==null?void 0:t.payments,columns:[{title:"#",data:null,render:function(n,r,a,j){return j.row+1}},{title:"Method",data:"method",render:function(n){return n.charAt(0).toUpperCase()+n.slice(1)}},{title:"Amount",data:"amount",render:function(n){return`KSh ${u(n)}`}},{title:"Date",data:"created_at",render:function(n){return i(n)}},{title:"Invoice",data:"invoice",render:function(n){return n?`#${n.invoice_number}`:"N/A"}}],responsive:!0,language:{emptyTable:"No payments found"}}),()=>{const n=$("#invoices-table").DataTable(),r=$("#payments-table").DataTable();$.fn.DataTable.isDataTable("#invoices-table")&&n.destroy(),$.fn.DataTable.isDataTable("#payments-table")&&r.destroy()}),[]);const l=n=>{switch(n){case"active":return e.jsx(m,{bg:"success",children:"Active"});case"inactive":return e.jsx(m,{bg:"warning",text:"dark",children:"Inactive"});case"suspended":return e.jsx(m,{bg:"danger",children:"Suspended"});default:return e.jsx(m,{bg:"secondary",children:n})}};return e.jsxs(f,{children:[e.jsx(b,{title:t==null?void 0:t.name}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"m-0 text-capitalize",children:t==null?void 0:t.name}),e.jsx(y,{children:e.jsxs(p,{href:route("admin.tenant.index"),className:"btn btn-outline-primary",children:[e.jsx(v,{className:"me-2"}),"Back to Tenants"]})})]}),e.jsx("hr",{className:"dashed-hr"}),e.jsx(x,{className:"mb-4",children:e.jsx(x.Body,{children:e.jsxs(g,{defaultActiveKey:"info",className:"mb-3",children:[e.jsx(d,{eventKey:"info",title:"Basic Info",children:e.jsx(s,{borderless:!0,className:"border mb-0",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{width:"50",children:"Name:"}),e.jsx("td",{children:t==null?void 0:t.name})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Domain:"}),e.jsx("td",{children:t==null?void 0:t.domains.map((n,r)=>e.jsx("div",{children:n.domain},r))})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Database:"}),e.jsx("td",{children:t==null?void 0:t.database})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Email:"}),e.jsx("td",{children:t==null?void 0:t.email})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Phone:"}),e.jsx("td",{children:t==null?void 0:t.phone})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Address:"}),e.jsx("td",{children:t==null?void 0:t.address})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Location:"}),e.jsx("td",{children:e.jsxs("ol",{children:[e.jsx("li",{children:t==null?void 0:t.county.name}),e.jsx("li",{children:t==null?void 0:t.constituency.name}),e.jsx("li",{children:t==null?void 0:t.ward.name})]})})]})]})})}),e.jsx(d,{eventKey:"billing",title:"Billing",children:e.jsx(s,{borderless:!0,className:"border mb-0",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{width:"50",children:"Plan:"}),e.jsx("td",{children:t==null?void 0:t.plan.name})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Status:"}),e.jsx("td",{children:l(t==null?void 0:t.status)})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Date:"}),e.jsx("td",{children:i(t==null?void 0:t.created_at,"DD/MM/YYYY")})]})]})})}),e.jsx(d,{eventKey:"invoices",title:"Invoices",children:e.jsx(s,{bordered:!0,striped:!0,hover:!0,responsive:!0,id:"invoices-table",className:"w-100"})}),e.jsx(d,{eventKey:"payments",title:"Payments",children:e.jsx(s,{bordered:!0,striped:!0,hover:!0,responsive:!0,id:"payments-table",className:"w-100"})})]})})})]})}export{h as default};
