import{r as t}from"./app-bV1oKjKy.js";import{x as b}from"./useData-Bpd0XriX.js";function R(){const[r,m]=t.useState([]),[o,p]=t.useState([]),[C,u]=t.useState(!0),[D,d]=t.useState(null),c=t.useCallback(async(s,e,n={})=>{var i,w,y;try{const a=await b.get(route(s),{params:n}),l=((i=a.data)==null?void 0:i.data)??a.data;if(!l)throw new Error(`Invalid response from ${s}`);return e(l),l}catch(a){const l=((y=(w=a.response)==null?void 0:w.data)==null?void 0:y.message)||a.message||`Failed to fetch ${s}`;throw d(l),console.error(`Error fetching ${s}:`,a),a}},[]),f=t.useCallback(()=>c("tenant.api.roles",m),[c]),h=t.useCallback(()=>c("tenant.api.slides",p),[c]),g=t.useCallback(async()=>{u(!0),d(null);try{await Promise.all([f(),h()])}catch{}finally{u(!1)}},[f,h]);t.useEffect(()=>{g()},[g]);const S=t.useMemo(()=>{const s=new Date;return o.filter(e=>{if(!e.is_active)return!1;if(e.start_date&&e.end_date){const n=new Date(e.start_date),i=new Date(e.end_date);return s>=n&&s<=i}return!0}).sort((e,n)=>e.display_order-n.display_order)},[o]),_=t.useCallback(s=>r.find(e=>e.id===s),[r]);return{roles:r,slides:o,activeSlides:S,isLoading:C,error:D,fetchAll:g,refreshRoles:f,refreshSlides:h,resetData:()=>{m([]),p([]),d(null),u(!0)},getRoleById:_,hasRoles:r.length>0,hasSlides:o.length>0,hasActiveSlides:S.length>0,stats:{rolesCount:r.length,slidesCount:o.length,activeSlidesCount:S.length}}}export{R as u};
