import{r as n,j as e,a as E}from"./app-bV1oKjKy.js";import{y as N,P as S}from"./PortalLayout-u-5QNYDI.js";import{F as M}from"./index-CaxveVre.js";import{S as m}from"./sweetalert2.esm.all-89IKscqO.js";import{x as g}from"./useData-Bpd0XriX.js";import{u as F}from"./useErrorToast-B9XNEQ0p.js";import{M as p}from"./Modal-Cs-ZlOYu.js";import{F as s}from"./Form-CnKhehiI.js";import{B as y}from"./warning-DViRBwvh.js";import{R as T}from"./Row-B4t5VXUr.js";import{C as k}from"./Col-CcX1xzGs.js";import{B as L}from"./ButtonGroup-eq7KuXkt.js";import{C as B}from"./Card-ClEnLKUp.js";import{T as G}from"./Table-M2KRe3ue.js";import"./CloseButton-BYbBlkTD.js";import"./ElementChildren-C0T05OxF.js";const D=(a=null)=>({name:(a==null?void 0:a.name)??"",slug:(a==null?void 0:a.slug)??"",description:(a==null?void 0:a.description)??"",is_active:(a==null?void 0:a.is_active)??!0});function _({show:a,onHide:l,navbar:f=null,onSuccess:u}){const r=!!f,{showErrorToast:w}=F(),[c,b]=n.useState(D());n.useEffect(()=>{a&&b(D(r?f:null))},[a,r,f]);const h=({target:t})=>{const{name:o,value:d,type:i,checked:j}=t;b(C=>({...C,[o]:i==="checkbox"?j:d}))},v=async t=>{var d,i;t.preventDefault();const o=r?"Update":"Create";try{if(!(await m.fire({title:`${o} Navbar`,text:`Confirm to ${o.toLowerCase()} this navbar.`,icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)return;m.fire({title:"Please wait...",text:`${o} in progress`,icon:"info",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>m.showLoading()});const C=r?route("admin.navbar.update",f.id):route("admin.navbar.store"),x=r?await g.put(C,c):await g.post(C,c);((d=x==null?void 0:x.data)==null?void 0:d.success)!==!1&&(N.success(((i=x==null?void 0:x.data)==null?void 0:i.message)||`Navbar ${o.toLowerCase()}d successfully`),u==null||u(),l())}catch(j){w(j)}finally{m.close()}};return e.jsx(p,{show:a,onHide:l,centered:!0,children:e.jsxs(s,{onSubmit:v,children:[e.jsx(p.Header,{closeButton:!0,children:e.jsx(p.Title,{children:r?"Edit Navbar":"New Navbar"})}),e.jsxs(p.Body,{children:[e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Name"}),e.jsx(s.Control,{name:"name",value:c.name,onChange:h,required:!0})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Slug"}),e.jsx(s.Control,{name:"slug",value:c.slug,onChange:h,required:!0})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Description"}),e.jsx(s.Control,{name:"description",value:c.description,onChange:h})]}),e.jsx(s.Group,{children:e.jsx(s.Check,{type:"checkbox",label:"Active",name:"is_active",checked:c.is_active,onChange:h})})]}),e.jsxs(p.Footer,{children:[e.jsx(y,{variant:"secondary",onClick:l,children:"Cancel"}),e.jsx(y,{variant:"primary",type:"submit",children:r?"Update":"Save"})]})]})})}function Z(){const[a,l]=n.useState(!1),[f,u]=n.useState(null),r=n.useCallback(()=>{$.fn.DataTable.isDataTable("#navbarsTable")&&$("#navbarsTable").DataTable().destroy(),$("#navbarsTable").DataTable({processing:!0,serverSide:!0,ajax:{url:route("admin.navbar.index"),type:"GET"},columns:[{data:"name",title:"Name"},{data:"slug",title:"Slug"},{data:"description",title:"Description"},{data:"status_badge",title:"Status"},{data:"action",title:"Actions"}],drawCallback:()=>{$(".edit-btn").off("click").on("click",function(){const t=$(this).data("id");h(t)}),$(".delete-btn").off("click").on("click",function(){const t=$(this).data("id");v(t)})}})},[]);n.useEffect(()=>{r()},[r]);const w=n.useCallback(()=>{u(null),l(!0)},[]),c=n.useCallback(()=>{l(!1),u(null)},[]),b=n.useCallback(t=>{N.success(t),$("#navbarsTable").DataTable().ajax.reload(null,!1),l(!1)},[]),h=async t=>{var o,d;try{const i=await g.get(route("admin.navbar.edit",t));i.data.success?(u(i.data.data),l(!0)):N.error(i.data.message)}catch(i){N.error(((d=(o=i.response)==null?void 0:o.data)==null?void 0:d.message)||"An error occurred")}},v=async t=>{if((await m.fire({title:"Delete Navbar?",text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await g.delete(route("admin.navbar.destroy",t)),$("#navbarsTable").DataTable().ajax.reload(null,!1),m.fire("Deleted!","Navbar has been deleted.","success")}catch{m.fire("Error!","Delete failed.","error")}};return e.jsxs(S,{children:[e.jsx(E,{title:"Navbars Management"}),e.jsx(T,{children:e.jsxs(k,{md:12,className:"d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"m-0 text-capitalize",children:"Navbars Management"}),e.jsx(L,{children:e.jsxs(y,{variant:"outline-primary",size:"sm",className:"rounded-1 d-flex align-items-center",onClick:w,children:[e.jsx(M,{className:"me-1"}),"New Navbar"]})})]})}),e.jsx("hr",{className:"dashed-hr"}),e.jsx(T,{children:e.jsx(k,{md:12,children:e.jsx(B,{className:"border-0 shadow-sm",children:e.jsx(B.Body,{children:e.jsx(G,{bordered:!0,striped:!0,hover:!0,responsive:!0,id:"navbarsTable",className:"w-100"})})})})}),e.jsx(_,{show:a,onHide:c,navbar:f,onSuccess:b})]})}export{Z as default};
